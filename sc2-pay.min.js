var sc2_pay=function(){function e(e){return e.substr(e.indexOf(" ")+1)}function n(o,r,c,s,u,d,l){if(i||t&&t.closed||l>60)return i=!1,t=null,void(d&&d(null));console.log("Checking Steem Transfer..."+s+", amount: "+r+" "+c),steem.api.getAccountHistory(o,-1,10,function(i,w){for(var m=!1,a=0;a<w.length;a++){var f=w[a],p=f[1].op;if(new Date(f[1].timestamp+"Z")>u&&p[1].memo==s&&"transfer"==p[0]&&p[1].to==o&&parseFloat(p[1].amount)==r&&e(p[1].amount)==c){m=!0,t&&t.close(),d&&d(f);break}}m||setTimeout(function(){n(o,r,c,s,u,d,l+1)},2e3)})}var t=null,i=!1;return{requestPayment:function(e,i,o,r,c,s){if("STEEM"==r||"SBD"==r){var u=sc2.sign("transfer",{to:i,amount:o.toFixed(3)+" "+r,memo:c});t=function(e,n,t,i){var o=void 0!=window.screenLeft?window.screenLeft:screen.left,r=void 0!=window.screenTop?window.screenTop:screen.top,c=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=c/2-t/2+o,d=s/2-i/2+r,l=window.open(e,n,"scrollbars=yes, width="+t+", height="+i+", top="+d+", left="+u);return window.focus&&l.focus(),l}(u,"sc2-pay-test",500,560),n(i,o,r,c,new Date,s)}else console.log('Unsupported currency "'+r+'". Supported currencies are "STEEM" or "SBD".')},requestPaymentVessel:function(e,t,i,o,r,c){if("STEEM"==o||"SBD"==o){var s=JSON.stringify([["transfer",{from:"",to:t,amount:i.toFixed(3)+" "+o,memo:r}]]),u="steem://sign/tx/"+btoa(s)+"#eyJhbW91bnQiOnsicHJvbXB0IjpmYWxzZSwidHlwZSI6ImFzc2V0IiwibGFiZWwiOiJEb25hdGlvbiJ9LCJtZW1vIjp7InByb21wdCI6ZmFsc2UsInR5cGUiOiJ0ZXh0IiwibGFiZWwiOiJNZXNzYWdlIChPcHRpb25hbCkifSwidG8iOnsicHJvbXB0IjpmYWxzZSwidHlwZSI6InRleHQifX0=";window.location=u,n(t,i,o,r,new Date,c,0)}else console.log('Unsupported currency "'+o+'". Supported currencies are "STEEM" or "SBD".')}}}();
var sc2_pay=function(){function e(e){return e.substr(e.indexOf(" ")+1)}function n(i,r,c,s,u,d){if(o||t.closed)return o=!1,void(d&&d(null));console.log("Checking Steem Transfer..."+s+", amount: "+r+" "+c),steem.api.getAccountHistory(i,-1,10,function(o,m){for(var a=!1,l=0;l<m.length;l++){var w=m[l],f=w[1].op;if(new Date(w[1].timestamp+"Z")>u&&f[1].memo==s&&"transfer"==f[0]&&f[1].to==i&&parseFloat(f[1].amount)==r&&e(f[1].amount)==c){a=!0,t&&t.close(),d&&d(w);break}}a||setTimeout(function(){n(i,r,c,s,u,d)},2e3)})}var t=null,o=!1;return{requestPayment:function(e,o,i,r,c,s){if("STEEM"==r||"SBD"==r){var u=sc2.sign("transfer",{to:o,amount:i.toFixed(3)+" "+r,memo:c});t=function(e,n,t,o){var i=void 0!=window.screenLeft?window.screenLeft:screen.left,r=void 0!=window.screenTop?window.screenTop:screen.top,c=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=c/2-t/2+i,d=s/2-o/2+r,m=window.open(e,n,"scrollbars=yes, width="+t+", height="+o+", top="+d+", left="+u);return window.focus&&m.focus(),m}(u,"sc2-pay-test",500,560),n(o,i,r,c,new Date,s)}else console.log('Unsupported currency "'+r+'". Supported currencies are "STEEM" or "SBD".')}}}();